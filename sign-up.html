<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <script src="script.js"></script>
    <title>GPMailbox - Inscription</title>
    <link rel="icon" type="image/x-icon" href="Elements/icon.ico">
</head>

<style>
body{
  margin: 0;
  padding: 0;
  background: linear-gradient(120deg,#007BFF, #6a6aff);
  height: 100vh;
  overflow: hidden;
}

input[type="submit"] {
  transition: background-color 0.5s;
}

input[type="submit"]:disabled {
  background-color: #ccc;
  cursor: not-allowed;
}
</style>

<body>
  <nav class="sidebar">
    <div class="sphere-decor">
      <div class="sphere"></div>
      <div class="sphere"></div>
      <div class="sphere"></div>
    </div>
    <div class="logo">
      <a href="index.html"><img src="Elements/logo.png" alt="Logo"></a>
    </div>
    <h1>Page d'inscription</h1>
  </nav>
  
  <div class="center">
    <h1>Inscription</h1>

    <form action="process-signup.php" method="post">
      <div class="txt_field">
        <input type="text" id="name" required>
        <span></span>
        <label for="name">Nom d'utilisateur :</label>
      </div>
      <span class="error-text" id="username-error"></span>

      <div class="txt_field">
        <input type="text" id="email" required pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$" title="Entrez un e-mail valide">
        <span></span>
        <label for="email">Email :</label>
      </div>
      <span class="error-text" id="email-error"></span>

      <div class="txt_field">
        <input type="password" id="password" required>
        <span></span>
        <label for="password">Mot de passe :</label>
      </div>
      <span class="error-text" id="password-error"></span>
        
      <div class="social-buttons">
        <button class="google-button">
          <i class="fab fa-google"></i> S'inscrire avec Google
        </button>
        <button class="facebook-button">
          <i class="fab fa-facebook"></i> S'inscrire avec Facebook
        </button>
      </div>
      
      <input type="submit" value="S'inscrire">
      
      <div class="signup_link">
        Déjà membre ? <a href="log-in.html">Connexion</a>
      </div>
    </form>
  </div>
</body>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const usernameInput = document.getElementById('username');
    const passwordInput = document.getElementById('password');
    const emailInput = document.getElementById('email');
    const submitButton = document.querySelector('input[type="submit"]');

    usernameInput.addEventListener('input', validateUsername);
    passwordInput.addEventListener('input', validatePassword);
    emailInput.addEventListener('input', validateEmail);
    function validateUsername() {
  const username = usernameInput.value.trim();
  const usernameError = document.getElementById('username-error');
  const usernamePattern = /^[a-zA-Z0-9_-]{5,30}$/;

  if (!username) {
    usernameError.textContent = "";
    submitButton.disabled = true;
  } else if (!usernamePattern.test(username)) {
    if (username.match(/[^a-zA-Z0-9_-]/)) {
      usernameError.textContent = "Le nom d'utilisateur ne peut contenir que des lettres, des chiffres, des tirets ou des underscores.";
    } else {
      usernameError.textContent = "Le nom d'utilisateur doit contenir entre 5 et 30 caractères.";
    }
    submitButton.disabled = true;
  } else {
    usernameError.textContent = "";
    submitButton.disabled = false;
  }
}

function validateEmail() {
  const email = emailInput.value.trim();
  const emailError = document.getElementById('email-error');
  const emailPattern = /^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$/i;

  if (!email) {
    emailError.textContent = "";
    submitButton.disabled = true;
  } else if (!emailPattern.test(email)) {
    emailError.textContent = "Veuillez entrer une adresse e-mail valide.";
    submitButton.disabled = true;
  } else {
    emailError.textContent = "";
    submitButton.disabled = false;
  }
}

function validatePassword() {
  const password = passwordInput.value.trim();
  const passwordError = document.getElementById('password-error');
  
  if (!password) {
    passwordError.textContent = "";
    submitButton.disabled = true;
  } else if (password.length < 8) {
    passwordError.textContent = "Le mot de passe doit contenir au moins 8 caractères.";
    submitButton.disabled = true;
  } else {
    passwordError.textContent = "";
    submitButton.disabled = false;
  }
}
  });
</script>
</html>
